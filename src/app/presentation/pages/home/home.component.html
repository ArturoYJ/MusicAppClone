<div class="apple-music-container">
  <aside class="sidebar">
    <div class="sidebar-header">
      <svg class="apple-logo" viewBox="0 0 24 24" fill="currentColor">
        <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
      </svg>
      <h1>Music</h1>
    </div>
    
    <nav class="sidebar-nav">
      <ul>
        <li class="nav-item active">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
          </svg>
          <span>Inicio</span>
        </li>
        <li class="nav-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <rect x="3" y="3" width="7" height="7"/>
            <rect x="14" y="3" width="7" height="7"/>
            <rect x="14" y="14" width="7" height="7"/>
            <rect x="3" y="14" width="7" height="7"/>
          </svg>
          <span>Explorar</span>
        </li>
        <li class="nav-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
          </svg>
          <span>Buscar</span>
        </li>
      </ul>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Search Bar -->
    <div class="search-bar">
      <div class="search-input-wrapper">
        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="11" cy="11" r="8"/>
          <path d="m21 21-4.35-4.35"/>
        </svg>
        <input 
          type="text" 
          [(ngModel)]="searchQuery"
          (keyup.enter)="onSearch()"
          placeholder="Buscar canciones, álbumes o artistas..."
          class="search-input"
        />
        <button *ngIf="searchQuery" (click)="clearSearch()" class="clear-btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Search Results -->
    <div *ngIf="searchResults" class="search-results">
      <button (click)="clearSearch()" class="back-btn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <line x1="19" y1="12" x2="5" y2="12"/>
          <polyline points="12 19 5 12 12 5"/>
        </svg>
        Resultados de búsqueda
      </button>

      <!-- Tracks Results -->
      <section *ngIf="searchResults.tracks.length > 0" class="results-section">
        <h2>Canciones</h2>
        <div class="track-list">
          <div 
            *ngFor="let track of searchResults.tracks; let i = index" 
            class="track-item"
            (click)="selectTrack(track)"
            [class.selected]="selectedTrack?.id === track.id"
          >
            <div class="track-number">{{ i + 1 }}</div>
            <img [src]="track.albumCover" [alt]="track.album" class="track-cover" />
            <div class="track-info">
              <div class="track-name">{{ track.name }}</div>
              <div class="track-artist">{{ track.artist }}</div>
            </div>
            <div class="track-album">{{ track.album }}</div>
            <div class="track-duration">{{ formatDuration(track.duration) }}</div>
          </div>
        </div>
      </section>

      <!-- Albums Results -->
      <section *ngIf="searchResults.albums.length > 0" class="results-section">
        <h2>Álbumes</h2>
        <div class="album-grid">
          <div *ngFor="let album of searchResults.albums" class="album-card">
            <img [src]="album.coverImage" [alt]="album.name" class="album-cover" />
            <div class="album-info">
              <h3>{{ album.name }}</h3>
              <p>{{ album.artist }}</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Artists Results -->
      <section *ngIf="searchResults.artists.length > 0" class="results-section">
        <h2>Artistas</h2>
        <div class="artist-grid">
          <div *ngFor="let artist of searchResults.artists" class="artist-card">
            <img [src]="artist.image" [alt]="artist.name" class="artist-image" />
            <h3>{{ artist.name }}</h3>
          </div>
        </div>
      </section>
    </div>

    <!-- Home Content -->
    <div *ngIf="!searchResults" class="home-content">
      <!-- Featured Playlists -->
      <section class="content-section">
        <h2>Destacados</h2>
        <div class="album-grid">
          <div *ngFor="let playlist of featuredPlaylists" class="album-card">
            <img [src]="playlist.coverImage" [alt]="playlist.name" class="album-cover" />
            <div class="album-info">
              <h3>{{ playlist.name }}</h3>
              <p>{{ playlist.artist }}</p>
            </div>
          </div>
        </div>
      </section>

      <!-- New Releases -->
      <section class="content-section">
        <h2>Nuevos Lanzamientos</h2>
        <div class="album-grid">
          <div *ngFor="let album of newReleases" class="album-card">
            <img [src]="album.coverImage" [alt]="album.name" class="album-cover" />
            <div class="album-info">
              <h3>{{ album.name }}</h3>
              <p>{{ album.artist }}</p>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Loading Indicator -->
    <div *ngIf="isSearching" class="loading">
      <div class="spinner"></div>
      <p>Buscando...</p>
    </div>
  </main>

  <!-- Player Bar -->
  <footer class="player-bar">
    <div class="player-left">
      <img 
        [src]="selectedTrack?.albumCover || 'assets/placeholder.png'" 
        [alt]="selectedTrack?.album || 'No track'" 
        class="player-cover"
      />
      <div class="player-track-info">
        <div class="player-track-name">{{ selectedTrack?.name || 'Sin reproducción' }}</div>
        <div class="player-artist">{{ selectedTrack?.artist || '' }}</div>
      </div>
    </div>

    <div class="player-center">
      <div class="player-controls">
        <button class="control-btn">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M6 4l14 8-14 8z"/>
          </svg>
        </button>
        <button class="control-btn control-btn-play">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <polygon points="5 3 19 12 5 21 5 3"/>
          </svg>
        </button>
        <button class="control-btn">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M18 4l-14 8 14 8z"/>
          </svg>
        </button>
      </div>
      <div class="player-progress">
        <span class="time">0:00</span>
        <div class="progress-bar">
          <div class="progress-fill" style="width: 0%"></div>
        </div>
        <span class="time">{{ selectedTrack ? formatDuration(selectedTrack.duration) : '0:00' }}</span>
      </div>
    </div>

    <div class="player-right">
      <button class="control-btn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
          <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/>
        </svg>
      </button>
    </div>
  </footer>
</div>